@model MvcApplicationForMobile.Models.Address
@{
    ViewBag.Title = Model.User.FirstName + " " + Model.User.LastName;

    ViewBag.TopLeftBtnClass = "itemVisible";
    ViewBag.TopLeftBtnLink = "/User/Edit/" + Model.UserID;

    ViewBag.TopRightBtnClass = "itemHidden";

}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<p class="error">@ViewBag.ErrorMessage</p>
@using (Html.BeginForm())
{
    <div class="error">@Html.ValidationSummary(true)</div>
    <fieldset>
        @Html.HiddenFor(model => model.UserID)
        @Html.HiddenFor(model => model.AddressID)
        @Html.HiddenFor(model => model.DateAdded)
        @Html.HiddenFor(model => model.IsDeleted)
        @Html.HiddenFor(model => model.Timestamp)
        <div class="editor-label">
            @Html.LabelFor(model => model.Line1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Line1)
            @Html.ValidationMessageFor(model => model.Line1)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Line2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Line2)
            @Html.ValidationMessageFor(model => model.Line2)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.PostCode)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.PostCode)
            @Html.ValidationMessageFor(model => model.PostCode)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Country)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Country)
            @Html.ValidationMessageFor(model => model.Country)
        </div>
    </fieldset>
    if (ViewBag.ButtonsDisabled != true)
    {
    <p class="buttonBar">
        <input type="submit" value="Save Changes" data-icon="check" data-inline="true" data-theme="b" />
        <a href="#deleteAddress" data-role="button" data-rel="dialog" data-inline="true"
            data-icon="delete"  onclick="$('#AddressToDeleteID').val('@Model.AddressID'); $('#TimestampAddressToDelete').val($('#Timestamp').val())">Delete Address</a>
    </p>
    }
}
@if (ViewBag.ConfirmDeletionButton == true)
{
using (Html.BeginForm("Delete","Address"))
    { 
    <input type="hidden" name="AddressToDeleteID" id="AddressToDeleteID" value="@Model.AddressID"/>
    <input type="hidden" name="DeleteConfirmed" id="DeleteConfirmed" value="1" />
    <p class="buttonBar">
        <input type="submit" value="Confirm Deletion" data-icon="delete" data-theme="b" data-inline="true" />
    </p>
    }
}
